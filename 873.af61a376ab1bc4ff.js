"use strict";(self.webpackChunkangular_material=self.webpackChunkangular_material||[]).push([[873],{7873:(oe,_,n)=>{n.r(_),n.d(_,{CoursesModule:()=>te});var c=n(6814),A=n(6208),m=n(1896),f=n(7398),a=n(6223),d=n(696),e=n(5879),C=n(2296),U=n(2032),h=n(9157),N=n(8013);function D(t,s){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"controlErrorMessage"),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o)," ")}}function F(t,s){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"controlErrorMessage"),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o)," ")}}function I(t,s){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"controlErrorMessage"),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o)," ")}}let T=(()=>{class t{constructor(o,r){this.dialogRef=o,this.data=r,this.nameControl=new a.NI(null,[a.kI.required,a.kI.minLength(3)]),this.modalityControl=new a.NI(null,[a.kI.required]),this.proffessorControl=new a.NI(null,[a.kI.required]),this.courseForm=new a.cw({name:this.nameControl,modality:this.modalityControl,proffessor:this.proffessorControl}),this.data&&(this.editingCourse=this.data,this.nameControl.setValue(this.data.name),this.modalityControl.setValue(this.data.modality),this.proffessorControl.setValue(this.data.proffessor))}onSubmit(){this.courseForm.invalid?this.courseForm.markAllAsTouched():this.dialogRef.close(this.courseForm.value)}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(d.so),e.Y36(d.WI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-courses-form-dialog"]],decls:31,vars:11,consts:[[1,"border","border-light-subtle","form-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"grid",3,"formGroup"],[1,"field","col-12"],["appearance","outline",1,"form-input"],["formControlName","name","matInput","","type","text","name","name"],[4,"ngFor","ngForOf"],["formControlName","modality","matInput","","type","text","name","modality"],["formControlName","proffessor","matInput","","type","text","name","proffessor"],["mat-dialog-actions","",1,"mb-3","mr-2","flex","justify-content-end"],["mat-raised-button","","color","primary","type","submit","mat-button","",1,"mr-3",3,"click"],["mat-raised-button","","color","primary","mat-button","","mat-dialog-close","",1,"mr-2"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,D,3,3,"mat-error",7),e.ALo(11,"keyvalue"),e.qZA()(),e.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e._uU(15,"Modalidad"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,F,3,3,"mat-error",7),e.ALo(18,"keyvalue"),e.qZA()(),e.TgZ(19,"div",4)(20,"mat-form-field",5)(21,"mat-label"),e._uU(22,"Profesor"),e.qZA(),e._UZ(23,"input",9),e.YNc(24,I,3,3,"mat-error",7),e.ALo(25,"keyvalue"),e.qZA()()()(),e.TgZ(26,"div",10)(27,"button",11),e.NdJ("click",function(){return r.onSubmit()}),e._uU(28,"Guardar"),e.qZA(),e.TgZ(29,"button",12),e._uU(30,"Cancelar"),e.qZA()()()),2&o&&(e.xp6(2),e.hij("",r.editingCourse?"Editando a "+r.editingCourse.name:"Creando curso"," "),e.xp6(2),e.Q6J("formGroup",r.courseForm),e.xp6(6),e.Q6J("ngForOf",e.lcZ(11,5,r.nameControl.errors)),e.xp6(7),e.Q6J("ngForOf",e.lcZ(18,7,r.modalityControl.errors)),e.xp6(7),e.Q6J("ngForOf",e.lcZ(25,9,r.proffessorControl.errors)))},dependencies:[c.sg,d.ZT,d.uh,d.xY,d.H8,C.lW,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,U.Nt,h.KE,h.hX,h.TO,c.Nd,N.D]}),t})();var v=n(5619),Y=n(1631),S=n(8180),b=n(9862),g=n(5502);let y=(()=>{class t{constructor(o,r){this.notifier=o,this.httpClient=r,this._courses$=new v.X([]),this.courses$=this._courses$.asObservable(),this._isLoading$=new v.X(!1),this.isLoading$=this._isLoading$.asObservable()}loadCourses(){this._isLoading$.next(!0),this.httpClient.get("http://localhost:3000/courses",{headers:new b.WM({token:"123456789"}),params:{page:1,limit:50}}).subscribe({next:o=>{this._courses$.next(o)},error:()=>{this.notifier.showError("Error al cargar los cursos. Vuelve a intentarlo mas tarde.")},complete:()=>{this._isLoading$.next(!1)}})}getCourses(){return this.courses$}getCourseById(o){return this.courses$.pipe((0,f.U)(r=>r.find(i=>i.id===o)))}createCourse(o){this.httpClient.post("http://localhost:3000/courses",o).pipe((0,Y.z)(r=>this._courses$.pipe((0,S.q)(1),(0,f.U)(i=>[...i,r])))).subscribe({next:r=>{this._courses$.next(r)}})}updateCourseById(o,r){this.httpClient.put("http://localhost:3000/courses/"+o,r).subscribe({next:()=>this.loadCourses()})}deleteCourseById(o){this.httpClient.delete("http://localhost:3000/courses/"+o).pipe().subscribe({next:r=>this.loadCourses()})}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(g.l),e.LFG(b.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Z=n(617),l=n(5313),$=n(5306);function q(t,s){1&t&&(e.TgZ(0,"th",10)(1,"span",11),e._uU(2,"ID"),e.qZA()())}function w(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.id," ")}}function L(t,s){1&t&&(e.TgZ(0,"th",10)(1,"span",11),e._uU(2,"Nombre del Curso"),e.qZA()())}function J(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.name,"")}}function M(t,s){1&t&&(e.TgZ(0,"th",10)(1,"span",11),e._uU(2,"Modalidad"),e.qZA()())}function B(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.modality,"")}}function Q(t,s){1&t&&(e.TgZ(0,"th",10)(1,"span",11),e._uU(2,"Profesor"),e.qZA()())}function j(t,s){if(1&t&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.proffessor,"")}}function E(t,s){1&t&&(e.TgZ(0,"th",10)(1,"span",11),e._uU(2,"Acciones"),e.qZA()())}function R(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"td",12)(1,"button",13)(2,"mat-icon"),e._uU(3,"visibility"),e.qZA()(),e.TgZ(4,"button",14),e.NdJ("click",function(){const u=e.CHM(o).$implicit,p=e.oxw();return e.KtG(p.editCourse.emit(u))}),e.TgZ(5,"mat-icon"),e._uU(6,"edit"),e.qZA()(),e.TgZ(7,"button",15),e.NdJ("click",function(){const u=e.CHM(o).$implicit,p=e.oxw();return e.KtG(p.deleteCourse.emit(u))}),e.TgZ(8,"mat-icon"),e._uU(9,"delete"),e.qZA()()()}if(2&t){const o=s.$implicit;e.xp6(1),e.Q6J("routerLink",o.id)}}function k(t,s){1&t&&e._UZ(0,"tr",16)}function H(t,s){1&t&&e._UZ(0,"tr",17)}let O=(()=>{class t{constructor(){this.displayedColumns=["id","name","modality","proffessor","actions"],this.dataSource=[],this.deleteCourse=new e.vpe,this.editCourse=new e.vpe}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-courses-table"]],inputs:{dataSource:"dataSource"},outputs:{deleteCourse:"deleteCourse",editCourse:"editCourse"},decls:18,vars:3,consts:[["mat-table","",1,"border","border-light-subtle","mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","modality"],["matColumnDef","proffessor"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["appResaltado",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,r){1&o&&(e.TgZ(0,"table",0),e.ynx(1,1),e.YNc(2,q,3,0,"th",2),e.YNc(3,w,2,1,"td",3),e.BQk(),e.ynx(4,4),e.YNc(5,L,3,0,"th",2),e.YNc(6,J,2,1,"td",3),e.BQk(),e.ynx(7,5),e.YNc(8,M,3,0,"th",2),e.YNc(9,B,2,1,"td",3),e.BQk(),e.ynx(10,6),e.YNc(11,Q,3,0,"th",2),e.YNc(12,j,2,1,"td",3),e.BQk(),e.ynx(13,7),e.YNc(14,E,3,0,"th",2),e.YNc(15,R,10,1,"td",3),e.BQk(),e.YNc(16,k,1,0,"tr",8),e.YNc(17,H,1,0,"tr",9),e.qZA()),2&o&&(e.Q6J("dataSource",r.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",r.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.displayedColumns))},dependencies:[C.RK,Z.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,$.L,m.rH]}),t})();function z(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1,"Esta Cargando..."),e.qZA())}const G=function(){return[]};function X(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"app-courses-table",4),e.NdJ("deleteCourse",function(i){e.CHM(o);const u=e.oxw();return e.KtG(u.onDeleteCourse(i))})("editCourse",function(i){e.CHM(o);const u=e.oxw();return e.KtG(u.onEditCourse(i))}),e.ALo(1,"async"),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("dataSource",e.lcZ(1,1,o.courses)||e.DdM(3,G))}}let K=(()=>{class t{constructor(o,r,i){this.matDialog=o,this.courseService=r,this.notifier=i,this.courseService.loadCourses(),this.isLoading$=this.courseService.isLoading$,this.courses=this.courseService.getCourses().pipe((0,f.U)(u=>u.map(p=>({...p,name:p.name.toUpperCase(),modality:p.modality.toUpperCase()}))))}onCreateCourse(){this.matDialog.open(T).afterClosed().subscribe({next:r=>{r&&(this.notifier.showSuccess("Se cargo el curso correctamente"),this.courseService.createCourse({name:r.name,modality:r.modality,proffessor:r.proffessor}))}})}onDeleteCourse(o){confirm(`\xbfEsta seguro de querer eliminar a ${o.name}?`)&&(this.courseService.deleteCourseById(o.id),this.notifier.showSuccess("Curso eliminado"))}onEditCourse(o){this.matDialog.open(T,{data:o}).afterClosed().subscribe({next:r=>{r&&(this.courseService.updateCourseById(o.id,r),this.notifier.showInfo("Se actualizo la informacion correctamente"))}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(d.uw),e.Y36(y),e.Y36(g.l))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-courses"]],decls:11,vars:4,consts:[[1,"mb-5"],["mat-raised-button","","color","primary","type","button",3,"click"],[4,"ngIf","ngIfElse"],["notLoadingTemplate",""],[3,"dataSource","deleteCourse","editCourse"]],template:function(o,r){if(1&o&&(e.TgZ(0,"h1"),e._uU(1,"Cursos"),e.qZA(),e.TgZ(2,"div",0)(3,"button",1),e.NdJ("click",function(){return r.onCreateCourse()}),e.TgZ(4,"mat-icon"),e._uU(5,"add"),e.qZA(),e._uU(6," Crear Curso "),e.qZA()(),e.YNc(7,z,2,0,"div",2),e.ALo(8,"async"),e.YNc(9,X,2,4,"ng-template",null,3,e.W1O)),2&o){const i=e.MAs(10);e.xp6(7),e.Q6J("ngIf",e.lcZ(8,2,r.isLoading$))("ngIfElse",i)}},dependencies:[c.O5,C.lW,Z.Hw,O,c.Ov],encapsulation:2}),t})();var x=n(5195);function W(t,s){if(1&t&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Detalles del Curso"),e.qZA(),e.TgZ(3,"p")(4,"strong"),e._uU(5,"Nombre:"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"p")(8,"strong"),e._uU(9,"Modalidad:"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"p")(12,"strong"),e._uU(13,"Profesor:"),e.qZA(),e._uU(14),e.qZA()()),2&t){const o=e.oxw();e.xp6(6),e.hij(" ",o.course.name,""),e.xp6(4),e.hij(" ",o.course.modality,""),e.xp6(4),e.hij(" ",o.course.proffessor,"")}}function V(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1," Usuario no encontrado! "),e.qZA())}let P=(()=>{class t{constructor(o,r,i,u){this.activatedRoute=o,this.router=r,this.notification=i,this.courseService=u}ngOnInit(){this.courseId=+this.activatedRoute.snapshot.params.id,this.loadCourse()}loadCourse(){this.courseId&&this.courseService.getCourseById(this.courseId).subscribe({next:o=>{o?this.course=o:(this.notification.showError("Curso no encontrado","Error"),this.router.navigate(["/dashboard/users"]))},error:o=>{console.error("Error al cargar el curso: ",o)}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.gz),e.Y36(m.F0),e.Y36(g.l),e.Y36(y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-course-detail"]],decls:9,vars:2,consts:[["routerLink","..","mat-icon-button",""],[4,"ngIf"]],template:function(o,r){1&o&&(e.TgZ(0,"button",0)(1,"mat-icon"),e._uU(2,"arrow_back"),e.qZA()(),e.TgZ(3,"mat-card")(4,"mat-card-content"),e.YNc(5,W,15,3,"div",1),e.qZA()(),e.TgZ(6,"mat-card")(7,"mat-card-content"),e.YNc(8,V,2,0,"div",1),e.qZA()()),2&o&&(e.xp6(5),e.Q6J("ngIf",r.course),e.xp6(3),e.Q6J("ngIf",!r.course))},dependencies:[c.O5,x.a8,x.dn,C.RK,Z.Hw,m.rH]}),t})(),ee=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,m.Bz.forChild([{path:"",component:K},{path:":id",component:P}]),m.Bz]}),t})(),te=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,A.m,m.Bz,ee]}),t})()}}]);