"use strict";(self.webpackChunkangular_material=self.webpackChunkangular_material||[]).push([[528],{9528:(et,Z,i)=>{i.r(Z),i.d(Z,{StudentsModule:()=>tt});var p=i(6814),l=i(1896),t=i(5879),h=i(5502),T=i(5619),g=i(7398),x=i(1631),y=i(8180),_=i(9862);let v=(()=>{class e{constructor(n,o){this.notifier=n,this.httpClient=o,this._students$=new T.X([]),this.students$=this._students$.asObservable(),this._isLoading$=new T.X(!1),this.isLoading$=this._isLoading$.asObservable()}loadStudents(){this._isLoading$.next(!0),this.httpClient.get("http://localhost:3000/students",{headers:new _.WM({token:"123456789"}),params:{page:1,limit:50}}).subscribe({next:n=>{this._students$.next(n)},error:()=>{this.notifier.showError("Error al cargar los alumnos. Vuelve a intentarlo mas tarde.")},complete:()=>{this._isLoading$.next(!1)}})}getStudents(){return this.students$}getStudentById(n){return this.students$.pipe((0,g.U)(o=>o.find(r=>r.id===n)))}createStudent(n){this.httpClient.post("http://localhost:3000/students",n).pipe((0,x.z)(o=>this._students$.pipe((0,y.q)(1),(0,g.U)(r=>[...r,o])))).subscribe({next:o=>{this._students$.next(o)}})}updateStudentById(n,o){this.httpClient.put("http://localhost:3000/students/"+n,o).subscribe({next:()=>this.loadStudents()})}deleteStudentById(n){this.httpClient.delete("http://localhost:3000/students/"+n).pipe().subscribe({next:o=>this.loadStudents()})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(h.l),t.LFG(_.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=i(5195),f=i(2296),S=i(617);function U(e,a){if(1&e&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Detalles del usuario"),t.qZA(),t.TgZ(3,"p")(4,"strong"),t._uU(5,"Nombre:"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"p")(8,"strong"),t._uU(9,"Apellido:"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"p")(12,"strong"),t._uU(13,"Turno:"),t.qZA(),t._uU(14),t.qZA()()),2&e){const n=t.oxw();t.xp6(6),t.hij(" ",n.student.name,""),t.xp6(4),t.hij(" ",n.student.surname,""),t.xp6(4),t.hij(" ",n.student.turno,"")}}function N(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1," Usuario no encontrado! "),t.qZA())}let D=(()=>{class e{constructor(n,o,r,u){this.activatedRoute=n,this.router=o,this.notification=r,this.studentService=u}ngOnInit(){this.studentId=+this.activatedRoute.snapshot.params.id,this.loadStudent()}loadStudent(){this.studentId&&this.studentService.getStudentById(this.studentId).subscribe({next:n=>{n?this.student=n:(this.notification.showError("Alumno no encontrado","Error"),this.router.navigate(["/dashboard/users"]))},error:n=>{console.error("Error al cargar el usuario: ",n)}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(h.l),t.Y36(v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-student-detail"]],decls:9,vars:2,consts:[["routerLink","..","mat-icon-button",""],[4,"ngIf"]],template:function(n,o){1&n&&(t.TgZ(0,"button",0)(1,"mat-icon"),t._uU(2,"arrow_back"),t.qZA()(),t.TgZ(3,"mat-card")(4,"mat-card-content"),t.YNc(5,U,15,3,"div",1),t.qZA()(),t.TgZ(6,"mat-card")(7,"mat-card-content"),t.YNc(8,N,2,0,"div",1),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("ngIf",o.student),t.xp6(3),t.Q6J("ngIf",!o.student))},dependencies:[p.O5,l.rH,A.a8,A.dn,f.RK,S.Hw],encapsulation:2}),e})();var s=i(6223),m=i(696),F=i(2032),C=i(9157),I=i(8013);function Y(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessage"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n)," ")}}function L(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessage"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n)," ")}}function $(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"controlErrorMessage"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n)," ")}}let b=(()=>{class e{constructor(n,o){this.dialogRef=n,this.data=o,this.nameControl=new s.NI(null,[s.kI.required,s.kI.minLength(3)]),this.surnameControl=new s.NI(null,[s.kI.required]),this.turnoControl=new s.NI(null,[s.kI.required]),this.studentForm=new s.cw({name:this.nameControl,surname:this.surnameControl,turno:this.turnoControl}),this.data&&(this.editingStudent=this.data,this.nameControl.setValue(this.data.name),this.surnameControl.setValue(this.data.surname),this.turnoControl.setValue(this.data.turno))}onSubmit(){this.studentForm.invalid?this.studentForm.markAllAsTouched():this.dialogRef.close(this.studentForm.value)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.so),t.Y36(m.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-student-form-dialog"]],decls:31,vars:11,consts:[[1,"border","border-light-subtle","form-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"grid",3,"formGroup"],[1,"field","col-12"],["appearance","outline",1,"form-input"],["formControlName","name","matInput","","type","text","name","name"],[4,"ngFor","ngForOf"],["formControlName","surname","matInput","","type","text","name","surname"],["formControlName","turno","matInput","","type","text","name","turno"],["mat-dialog-actions","",1,"mb-3","mr-2","flex","justify-content-end"],["mat-raised-button","","color","primary","type","submit","mat-button","",1,"mr-3",3,"click"],["mat-raised-button","","color","primary","mat-button","","mat-dialog-close","",1,"mr-2"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Nombre"),t.qZA(),t._UZ(9,"input",6),t.YNc(10,Y,3,3,"mat-error",7),t.ALo(11,"keyvalue"),t.qZA()(),t.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"Apellido"),t.qZA(),t._UZ(16,"input",8),t.YNc(17,L,3,3,"mat-error",7),t.ALo(18,"keyvalue"),t.qZA()(),t.TgZ(19,"div",4)(20,"mat-form-field",5)(21,"mat-label"),t._uU(22,"Turno"),t.qZA(),t._UZ(23,"input",9),t.YNc(24,$,3,3,"mat-error",7),t.ALo(25,"keyvalue"),t.qZA()()()(),t.TgZ(26,"div",10)(27,"button",11),t.NdJ("click",function(){return o.onSubmit()}),t._uU(28,"Guardar"),t.qZA(),t.TgZ(29,"button",12),t._uU(30,"Cancelar"),t.qZA()()()),2&n&&(t.xp6(2),t.hij("",o.editingStudent?"Editando a "+o.editingStudent.name+" "+o.editingStudent.surname:"A\xf1adiendo Alumno"," "),t.xp6(2),t.Q6J("formGroup",o.studentForm),t.xp6(6),t.Q6J("ngForOf",t.lcZ(11,5,o.nameControl.errors)),t.xp6(7),t.Q6J("ngForOf",t.lcZ(18,7,o.surnameControl.errors)),t.xp6(7),t.Q6J("ngForOf",t.lcZ(25,9,o.turnoControl.errors)))},dependencies:[p.sg,m.ZT,m.uh,m.xY,m.H8,f.lW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,F.Nt,C.KE,C.hX,C.TO,p.Nd,I.D]}),e})();var d=i(5313),w=i(5306),q=i(2975);function J(e,a){1&e&&(t.TgZ(0,"th",9)(1,"span",10),t._uU(2,"ID"),t.qZA()())}function M(e,a){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.id," ")}}function B(e,a){1&e&&(t.TgZ(0,"th",9)(1,"span",10),t._uU(2,"Nombre y Apellido"),t.qZA()())}function E(e,a){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.ALo(2,"fullName"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n,"uppercase"),"")}}function Q(e,a){1&e&&(t.TgZ(0,"th",9)(1,"span",10),t._uU(2,"Turno"),t.qZA()())}function R(e,a){if(1&e&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.turno,"")}}function j(e,a){1&e&&(t.TgZ(0,"th",9)(1,"span",10),t._uU(2,"Acciones"),t.qZA()())}function k(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",11)(1,"button",12)(2,"mat-icon"),t._uU(3,"visibility"),t.qZA()(),t.TgZ(4,"button",13),t.NdJ("click",function(){const u=t.CHM(n).$implicit,c=t.oxw();return t.KtG(c.editStudent.emit(u))}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()(),t.TgZ(7,"button",14),t.NdJ("click",function(){const u=t.CHM(n).$implicit,c=t.oxw();return t.KtG(c.deleteStudent.emit(u))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()}if(2&e){const n=a.$implicit;t.xp6(1),t.Q6J("routerLink",n.id)}}function H(e,a){1&e&&t._UZ(0,"tr",15)}function O(e,a){1&e&&t._UZ(0,"tr",16)}let z=(()=>{class e{constructor(){this.displayedColumns=["id","fullName","turno","actions"],this.dataSource=[],this.deleteStudent=new t.vpe,this.editStudent=new t.vpe}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-students-table"]],inputs:{dataSource:"dataSource"},outputs:{deleteStudent:"deleteStudent",editStudent:"editStudent"},decls:15,vars:3,consts:[["mat-table","",1,"border","border-light-subtle","mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullName"],["matColumnDef","turno"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["appResaltado",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,J,3,0,"th",2),t.YNc(3,M,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,B,3,0,"th",2),t.YNc(6,E,3,4,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,Q,3,0,"th",2),t.YNc(9,R,2,1,"td",3),t.BQk(),t.ynx(10,6),t.YNc(11,j,3,0,"th",2),t.YNc(12,k,10,1,"td",3),t.BQk(),t.YNc(13,H,1,0,"tr",7),t.YNc(14,O,1,0,"tr",8),t.qZA()),2&n&&(t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[l.rH,f.RK,S.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,w.L,q.k]}),e})();function G(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Esta Cargando..."),t.qZA())}const X=function(){return[]};function K(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"app-students-table",4),t.NdJ("deleteStudent",function(r){t.CHM(n);const u=t.oxw();return t.KtG(u.onDeleteStudent(r))})("editStudent",function(r){t.CHM(n);const u=t.oxw();return t.KtG(u.onEditStudent(r))}),t.ALo(1,"async"),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("dataSource",t.lcZ(1,1,n.students)||t.DdM(3,X))}}const W=[{path:"",component:(()=>{class e{constructor(n,o,r){this.matDialog=n,this.studentService=o,this.notifier=r,this.studentService.loadStudents(),this.isLoading$=this.studentService.isLoading$,this.students=this.studentService.getStudents().pipe((0,g.U)(u=>u.map(c=>({...c,name:c.name.toUpperCase(),surname:c.surname.toUpperCase()}))))}onCreateStudent(){this.matDialog.open(b).afterClosed().subscribe({next:o=>{o&&(this.notifier.showSuccess("Se cargo el alumno correctamente"),this.studentService.createStudent({name:o.name,surname:o.surname,turno:o.turno}))}})}onDeleteStudent(n){confirm(`\xbfEsta seguro de querer eliminar a ${n.name}?`)&&(this.studentService.deleteStudentById(n.id),this.notifier.showSuccess("Alumno eliminado"))}onEditStudent(n){this.matDialog.open(b,{data:n}).afterClosed().subscribe({next:o=>{o&&(this.studentService.updateStudentById(n.id,o),this.notifier.showInfo("Se actualizo la informacion correctamente"))}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.uw),t.Y36(v),t.Y36(h.l))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-students"]],decls:11,vars:4,consts:[[1,"mb-5"],["mat-raised-button","","color","primary","type","button",3,"click"],[4,"ngIf","ngIfElse"],["notLoadingTemplate",""],[3,"dataSource","deleteStudent","editStudent"]],template:function(n,o){if(1&n&&(t.TgZ(0,"h1"),t._uU(1,"Alumnos"),t.qZA(),t.TgZ(2,"div",0)(3,"button",1),t.NdJ("click",function(){return o.onCreateStudent()}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA(),t._uU(6," A\xf1adir Alumno "),t.qZA()(),t.YNc(7,G,2,0,"div",2),t.ALo(8,"async"),t.YNc(9,K,2,4,"ng-template",null,3,t.W1O)),2&n){const r=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,o.isLoading$))("ngIfElse",r)}},dependencies:[p.O5,f.lW,S.Hw,z,p.Ov],encapsulation:2}),e})()},{path:":id",component:D}];let V=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(W),l.Bz]}),e})();var P=i(6208);let tt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,V,P.m,l.Bz]}),e})()}}]);